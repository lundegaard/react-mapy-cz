"use strict";(self.webpackChunkmapy_cz_react_docs=self.webpackChunkmapy_cz_react_docs||[]).push([[862],{2384:function(e,r,n){var t=n(7378),o=n(3615),a=n(1296),i=n(9517),u=function(e){var r=e.maxDistance,n=void 0===r?100:r,o=(0,a.S)(),u=o.map,c=o.SMap,s=(0,i.S)(),l=(0,t.useRef)();return(0,t.useEffect)((function(){l.current=new c.Marker.Clusterer(u,n),s.setClusterer(l.current)}),[u,s,n,c]),null};u.propTypes={maxDistance:o.number},r.Z=u},7915:function(e,r,n){n.d(r,{Z:function(){return c}});var t=n(7378),o=n(3615),a="smap_3Ndk",i=n(1296),u=function(e){var r=e.children,n=e.width,o=void 0===n?"100%":n,u=e.height,c=void 0===u?"auto":u,s=(0,i.S)(),l=s.map,d=s.id;return t.createElement("div",{style:{width:o,height:c,minHeight:"150px"},id:d,className:a},l&&r)};u.propTypes={children:o.node,height:o.string,width:o.string};var c=(0,t.memo)(u)},1296:function(e,r,n){n.d(r,{Z:function(){return g},S:function(){return v}});var t=n(7378),o=n(3615),a=n(1572),i=n(455),u=n(3996),c=n.n(u),s=function(e){return function(r){var n=(0,t.useState)(!1),o=n[0],i=n[1],u=(0,t.useCallback)((function(e){var r,n;void 0===e&&(e=1),c()(window,"This library is not designed to be run on the server"),null!=(r=window)&&null!=(n=r.SMap)&&n.Suggest?i(!0):e<=a.aG&&setTimeout((function(){return u(!1)}),a.VP)}),[]);return(0,t.useEffect)((function(){if(document.getElementById(a.AT))u();else{var e=document.createElement("script");e.src="https://api.mapy.cz/loader.js",e.id=a.AT,e.async=!0,e.onload=function(){window.Loader.async=!0,window.Loader.load(null,{suggest:!0},u)},document.head.appendChild(e)}}),[u]),o?t.createElement(e,r):t.createElement("div",null,"Loading map...")}},l=function(e,r){return function(n,t,o,a){void 0===o&&(o=17),void 0===a&&(a=!0);var i=r.Coords.fromWGS84(n,t);e.setCenterZoom(i,o,a)}},d=n(4665),p=function(){var e=(0,t.useState)([]),r=e[0],n=e[1],o=(0,t.useCallback)((function(e,r){n((function(n){if(n.some((function(e){return e.type===r})))throw new Error("There can be only one rendered layer of type "+r+" in map");return[].concat(n,[{type:r,data:e}])}))}),[]),a=(0,t.useCallback)((function(e){var n=r.find((function(r){return r.type===e}));return null==n?void 0:n.data}),[r]);return{activeLayers:r,getActiveLayerByType:a,registerActiveLayer:o}},f=function(e,r,n,o,a,i,u){var c=(0,t.useState)(),s=c[0],l=c[1];return(0,t.useEffect)((function(){if(!s&&i){var t=i.Coords.fromWGS84(e.lng,e.lat),c=new i(window.JAK.gel(r),t,u);c.setZoomRange(a,o);var d=n[0],p=n.slice(1);c.addDefaultLayer(d).enable(),p.forEach((function(e){c.addDefaultLayer(e)})),l(c)}}),[e,r,s,n,o,a,i,u]),s},m=(0,t.createContext)(),v=(0,d.V)(m,"MapProvider"),y=function(e){var r=e.center,n=e.children,o=e.id,i=void 0===o?"mapy-cz-map":o,u=e.mapLayers,c=void 0===u?[a.Hi.BASE_NEW]:u,s=e.maxZoom,d=void 0===s?18:s,v=e.minZoom,y=void 0===v?1:v,g=e.zoom,M=void 0===g?5:g,h=(0,t.useMemo)((function(){return window.SMap}),[]),w=f(r,i,c,d,y,h,M),k=p();return t.createElement(m.Provider,{value:Object.assign({},k,{id:i,map:w,mapLayers:c,setMapCenter:l(w,h),SMap:h})},n)};y.propTypes={center:(0,o.shape)(i.Y).isRequired,children:o.node,id:o.string,mapLayers:(0,o.arrayOf)([(0,o.oneOf)(Object.keys(a.Hi))]),maxZoom:o.number,minZoom:o.number,zoom:o.number};var g=s(y)},9517:function(e,r,n){n.d(r,{S:function(){return s}});var t=n(7378),o=n(3615),a=n(4665),i=n(1572),u=n(1296),c=(0,t.createContext)(),s=(0,a.V)(c,"MarkerLayer"),l=function(e){var r=e.children,n=(0,u.S)(),o=n.map,a=n.SMap,s=n.registerActiveLayer,l=(0,t.useRef)();return(0,t.useEffect)((function(){var e=new a.Layer.Marker;return l.current=e,null==o||o.addLayer(e),e.enable(),s(e,i.$N.MARKER),function(){o.removeLayer(l.current)}}),[o,a,s]),t.createElement(c.Provider,{value:l.current},l.current&&r)};l.propTypes={children:o.node},r.Z=l},1038:function(e,r,n){var t=n(7378),o=n(3615),a=n(258),i=n(455),u=n(9517),c=n(1296),s=function(e){var r=e.markersData,n=(0,u.S)(),o=(0,c.S)().SMap,i=(0,t.useRef)(),s=(0,t.useRef)();return(0,t.useEffect)((function(){if(Array.isArray(r)&&JSON.stringify(i.current)!==JSON.stringify(r)){var e=r.map(a.Z);s.current&&(null==n||n.removeMarker(s.current)),null==n||n.addMarker(e),i.current=r,s.current=e}}),[n,r,o]),null};s.propTypes={markersData:(0,o.arrayOf)((0,o.shape)(i.q)).isRequired},r.Z=s},8534:function(e,r,n){var t=n(7378),o=n(3615),a=n(1296),i=function(e){var r=e.onClusterClick,n=e.onMarkerClick,o=(0,a.S)().map,i=(0,t.useRef)(r),u=(0,t.useRef)(n),c=(0,t.useRef)();return(0,t.useLayoutEffect)((function(){i.current=r,u.current=n})),(0,t.useEffect)((function(){return(u.current||i.current)&&(c.current=o.getSignals().addListener(undefined,"marker-click",(function(e){!e.target._clusterOptions&&u.current&&u.current(e.target),e.target._clusterOptions&&i.current&&i.current(e.target)}))),function(){c.current&&o.getSignals().removeListener(c.current)}}),[o]),null};i.propTypes={onClusterClick:o.func,onMarkerClick:o.func},r.Z=i},1601:function(e,r,n){var t=n(3615),o=n(7378),a=n(1296),i=function(e){var r=e.pan,n=void 0===r||r,t=e.zoom,i=void 0===t||t,u=(0,a.S)(),c=u.map,s=u.SMap,l=0;return l|=n&&s.KB_PAN,l|=i&&s.KB_ZOOM,(0,o.useEffect)((function(){var e=new s.Control.Keyboard(l);return c.addControl(e),function(){c.removeControl(e)}}),[c,l,s]),null};i.propTypes={pan:t.bool,zoom:t.bool},r.Z=i},8053:function(e,r,n){var t=n(3615),o=n(7378),a=n(1296),i=function(e){var r=e.pan,n=void 0===r||r,t=e.wheel,i=void 0===t||t,u=e.zoom,c=void 0===u||u,s=e.options,l=(0,a.S)(),d=l.map,p=l.SMap,f=0;return f|=n&&p.MOUSE_PAN,f|=c&&p.MOUSE_ZOOM,f|=i&&p.MOUSE_WHEEL,(0,o.useEffect)((function(){var e=new p.Control.Mouse(f,s);return d.addControl(e),function(){d.removeControl(e)}}),[d,f,p,s]),null};i.propTypes={options:(0,t.shape)({driftSlowdown:t.number,driftTreshold:t.number,idleDelay:t.number,maxDriftSpeed:t.number,minDriftSpeed:t.number,scrollDelay:t.number}),pan:t.bool,wheel:t.bool,zoom:t.bool},r.Z=i},5970:function(e,r,n){var t,o=n(7378),a=n(3615),i=n(1296),u=function(e){var r=e.labels,n=e.showZoomMenu,t=e.sliderHeight,a=void 0===t?16:t,u=e.stepHeight,c=void 0===u?9:u,s=(0,i.S)(),l=s.map,d=s.SMap;return(0,o.useEffect)((function(){var e=new d.Control.Zoom(r,{showZoomMenu:n,sliderHeight:a,step:c});return l.addControl(e),function(){l.removeControl(e)}}),[r,l,n,a,d,c]),null};u.propTypes={labels:(0,a.shape)((t={},t[a.number]=a.string,t)),showZoomMenu:a.bool,sliderHeight:a.number,step:a.number,titles:(0,a.arrayOf)(a.string)},r.Z=u},1572:function(e,r,n){n.d(r,{$N:function(){return l},AT:function(){return t},GA:function(){return s},Hi:function(){return i},VP:function(){return a},aG:function(){return o},b2:function(){return c},nS:function(){return u}});var t="mapy.cz-api-script",o=3,a=300,i={BASE:1,TURIST:2,OPHOTO:3,HYBRID:4,HISTORIC:5,BIKE:6,TRAIL:7,OPHOTO0203:8,OPHOTO0406:9,OBLIQUE:12,SMART_BASE:14,SMART_OPHOTO:15,SMART_TURIST:16,RELIEF:17,TURIST_WINTER:19,SMART_WINTER:20,SUMMER:21,SMART_SUMMER:22,GEOGRAPHY:23,OPHOTO1012:24,HYBRID_SPARSE:25,OPHOTO1415:26,BASE_NEW:27,TURIST_NEW:28},u={FAST:"fast",SHORT:"short",BIKE1:"bike1",BIKE2:"bike2",BIKE3:"bike3",TURIST1:"turist1",TURIST2:"turist2"},c="#f00",s=3,l={CANVAS:"CANVAS",GEOMETRY:"GEOMETRY",HUD:"HUD",IMAGE:"IMAGE",MARKER:"MARKER"}},258:function(e,r,n){var t=n(1244),o=["cardBodyText","cardHeaderText","coords","enableCard","imgSrc","tooltip"];r.Z=function(e){var r=e.cardBodyText,n=e.cardHeaderText,a=e.coords,i=e.enableCard,u=e.imgSrc,c=e.tooltip,s=(0,t.Z)(e,o),l=Object.assign({},u?{url:u}:void 0,c?{title:c}:void 0,s),d=window.SMap.Coords.fromWGS84(a.longitude,a.latitude),p=new window.SMap.Marker(d,!1,Object.keys(l).length>0?l:void 0);if(i){var f=new window.SMap.Card;f.getHeader().innerHTML=n,f.getBody().innerHTML=r,p.decorate(window.SMap.Marker.Feature.Card,f)}return p}},4665:function(e,r,n){n.d(r,{V:function(){return o}});var t=n(7378),o=function(e,r){return function(){var n,o=(0,t.useContext)(e);if(void 0===o)throw new Error(e.displayName+" must be used within "+(null!=r?r:null==e||null==(n=e.Provider)?void 0:n.displayName));return o}}},455:function(e,r,n){n.d(r,{Y:function(){return o},q:function(){return a}});var t=n(3615),o={lng:(0,t.oneOfType)([t.number,t.string]),lat:(0,t.oneOfType)([t.number,t.string])},a={cardBodyText:t.string,cardHeaderText:t.string,coords:(0,t.shape)({lng:t.number,lat:t.number}).isRequired,enableCard:t.bool,imgSrc:t.string,tooltip:t.string}},9089:function(e,r,n){n.d(r,{Om:function(){return a},_y:function(){return o},jS:function(){return i}});var t=function(e,r,n){return 1*(Math.random()*(r-e)+e).toFixed(n)},o=function(e,r){return Array.from(Array(e),(function(e,n){return r?{gps:{longitude:t(-180,180,5),latitude:t(-90,90,5)},title:"Marker "+n}:{longitude:t(-180,180,5),latitude:t(-90,90,5),title:"Marker "+n}}))},a=function(e){var r=e._options;window.alert(r.title+" was clicked!")},i=function(){window.alert("Cluster was clicked!")}},9620:function(e,r,n){n.r(r),n.d(r,{contentTitle:function(){return h},default:function(){return S},frontMatter:function(){return M},metadata:function(){return w},toc:function(){return k}});var t=n(2685),o=n(1244),a=(n(7378),n(5318)),i=n(1296),u=n(7915),c=n(5970),s=n(1601),l=n(8534),d=n(8053),p=n(9517),f=n(2384),m=n(1038),v=n(1080),y=n(9089),g=["components"],M={id:"07-interactive-map-with-clusters-and-signals"},h="Clustered points and signals",w={unversionedId:"Examples/07-interactive-map-with-clusters-and-signals",id:"Examples/07-interactive-map-with-clusters-and-signals",title:"Clustered points and signals",description:"MapProvider, Marker, MarkerLayer, MouseControl, MultipleMarkers, Signals, ZoomControl } from '../../../core/src';",source:"@site/docs/Examples/07-interactive-map-with-clusters-and-signals.md",sourceDirName:"Examples",slug:"/Examples/07-interactive-map-with-clusters-and-signals",permalink:"/react-mapy-cz/docs/Examples/07-interactive-map-with-clusters-and-signals",editUrl:"https://github.com/lundegaard/react-mapy-cz/docs/Examples/07-interactive-map-with-clusters-and-signals.md",tags:[],version:"current",sidebarPosition:7,frontMatter:{id:"07-interactive-map-with-clusters-and-signals"},sidebar:"docsSidebar",previous:{title:"Rendering thousands of points with Marker - do not do this",permalink:"/react-mapy-cz/docs/Examples/06-interactive-map-with-thousands-of-points-marker"},next:{title:"Map with search",permalink:"/react-mapy-cz/docs/Examples/08-interactive-map-with-search"}},k=[],b={toc:k};function S(e){var r=e.components,n=(0,o.Z)(e,g);return(0,a.kt)("wrapper",(0,t.Z)({},b,n,{components:r,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"clustered-points-and-signals"},"Clustered points and signals"),(0,a.kt)("p",null,"Interactive map with controls, marker clustering and signals. You can listen to signals and add your own action to the marker or cluster click."),(0,a.kt)("div",null,(0,a.kt)("section",{className:v.Z.sMap},(0,a.kt)(i.Z,{center:{lng:14.4608576,lat:50.0963478},mdxType:"MapProvider"},(0,a.kt)(u.Z,{mdxType:"Map"},(0,a.kt)(c.Z,{mdxType:"ZoomControl"}),(0,a.kt)(s.Z,{mdxType:"KeyboardControl"}),(0,a.kt)(l.Z,{onMarkerClick:y.Om,onClusterClick:y.jS,mdxType:"Signals"}),(0,a.kt)(d.Z,{zoom:!0,pan:!0,wheel:!0,mdxType:"MouseControl"}),(0,a.kt)(p.Z,{mdxType:"MarkerLayer"},(0,a.kt)(f.Z,{mdxType:"Clusterer"}),(0,a.kt)(m.Z,{markersData:(0,y._y)(2e3,!0).map((function(e){return Object.assign({coords:e.gps,tooltip:e.title},e)})),mdxType:"MultipleMarkers"})))))),(0,a.kt)("br",null),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Code")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"<MapProvider center={{lng:  14.4608576, lat: 50.0963478}}>\n        <Map>\n            <ZoomControl />\n            <KeyboardControl />\n            <Signals onMarkerClick={onMarkerClick} onClusterClick={onClusterClick}/>\n            <MouseControl zoom pan wheel />\n            <MarkerLayer >\n                <Clusterer />\n                <MultipleMarkers markersData={generatePoints(2000, true).map((point) => ({\n                    coords: point.gps,\n                    tooltip: point.title,\n                    ...point,\n                }))}\n                />\n            </MarkerLayer>\n            </Map>\n        </MapProvider>\n")))}S.isMDXComponent=!0},5318:function(e,r,n){n.d(r,{Zo:function(){return l},kt:function(){return f}});var t=n(7378);function o(e,r,n){return r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function a(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);r&&(t=t.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),n.push.apply(n,t)}return n}function i(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?a(Object(n),!0).forEach((function(r){o(e,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))}))}return e}function u(e,r){if(null==e)return{};var n,t,o=function(e,r){if(null==e)return{};var n,t,o={},a=Object.keys(e);for(t=0;t<a.length;t++)n=a[t],r.indexOf(n)>=0||(o[n]=e[n]);return o}(e,r);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(t=0;t<a.length;t++)n=a[t],r.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var c=t.createContext({}),s=function(e){var r=t.useContext(c),n=r;return e&&(n="function"==typeof e?e(r):i(i({},r),e)),n},l=function(e){var r=s(e.components);return t.createElement(c.Provider,{value:r},e.children)},d={inlineCode:"code",wrapper:function(e){var r=e.children;return t.createElement(t.Fragment,{},r)}},p=t.forwardRef((function(e,r){var n=e.components,o=e.mdxType,a=e.originalType,c=e.parentName,l=u(e,["components","mdxType","originalType","parentName"]),p=s(n),f=o,m=p["".concat(c,".").concat(f)]||p[f]||d[f]||a;return n?t.createElement(m,i(i({ref:r},l),{},{components:n})):t.createElement(m,i({ref:r},l))}));function f(e,r){var n=arguments,o=r&&r.mdxType;if("string"==typeof e||o){var a=n.length,i=new Array(a);i[0]=p;var u={};for(var c in r)hasOwnProperty.call(r,c)&&(u[c]=r[c]);u.originalType=e,u.mdxType="string"==typeof e?e:o,i[1]=u;for(var s=2;s<a;s++)i[s]=n[s];return t.createElement.apply(null,i)}return t.createElement.apply(null,n)}p.displayName="MDXCreateElement"},3996:function(e){e.exports=function(e,r,n,t,o,a,i,u){if(!e){var c;if(void 0===r)c=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var s=[n,t,o,a,i,u],l=0;(c=new Error(r.replace(/%s/g,(function(){return s[l++]})))).name="Invariant Violation"}throw c.framesToPop=1,c}}},1080:function(e,r){r.Z={heroBanner:"heroBanner_1ZBZ",sMap:"sMap_JuFh"}}}]);